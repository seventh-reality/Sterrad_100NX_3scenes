<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Model Viewer with AR</title>
  
  <script type="module" src="model-viewer.min.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #f0f0f0;
    }
    model-viewer {
      width: 100%;
      height: 500px;
      background-color: #eee;
      position: relative;
      display: block;
    }
    #ar-button {
      background-image: url('ar_icon.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-color: #efefef;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 50%;
      cursor: pointer;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      width: 70px;
      height: 70px;
    }
    #buttons {
      position: absolute;
      bottom: 10px;
      width: 100%;
      text-align: center;
      z-index: 5;
    }
    /* General button styles */
    .slide {
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      color: #fff;
      border: none;
      cursor: pointer;
      display: inline-block;
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 10px;
      font-weight: bold;
      backdrop-filter: blur(5px);
      min-width: 100px;
    }
    /* Specific background images for each button */
    #button1 {
      background-image: url('Icon.png'); /* Intro button */
    }
    #button2 {
      background-image: url('Icon_1.png'); /* Parts button */
    }
    #button3 {
      background-image: url('Icon_2.png'); /* Usage button */
    }
    /* Selected button border */
    .selected {
      border: 2px solid #000;
    }
    audio {
      width: 100%;
      margin-top: 20px;
    }
  </style>
</head>

<body>

<model-viewer id="model-viewer" 
  src="USAGE.glb"
  ios-src="USAGE.usdz"
  ar
  ar-modes="scene-viewer webxr quick-look"
  camera-controls
  auto-rotate>
  
  <button slot="ar-button" id="ar-button"></button>

  <div id="buttons">
    <button class="slide selected" id="button1" onclick="switchSrc(1, 'USAGE.glb', 'Intro.mp3')">Intro</button>
    <button class="slide" id="button2" onclick="switchSrc(2, 'Sterrad_PARTS.glb', 'parts.mp3')">Parts</button>
    <button class="slide" id="button3" onclick="switchSrc(3, 'Steerad.glb', 'Usage.mp3')">Usage</button>
  </div>
  
</model-viewer>

<audio id="audioPlayer" controls autoplay>
  <source src="Intro.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
  function switchSrc(buttonId, modelPath, audioPath) {
    const modelViewer = document.getElementById('model-viewer');
    const audioPlayer = document.getElementById('audioPlayer');

    modelViewer.src = modelPath;
    modelViewer.setAttribute('ios-src', modelPath.replace('.glb', '.usdz'));

    audioPlayer.src = audioPath;
    audioPlayer.play();

    // Update button selection
    document.querySelectorAll('.slide').forEach(button => button.classList.remove('selected'));
    document.getElementById('button' + buttonId).classList.add('selected');
  }
</script>

<!-- Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESGCJ1EYXM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESGCJ1EYXM');
</script>

</body>
</html>
